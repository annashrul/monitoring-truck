<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Boostrap 4 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <!-- Style -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <!-- Script -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
    <style>
        *{
            font-family: 'Poppins', sans-serif;
        }
        .bold {
            font-weight: bold !important;
        }
        .wrapper-card{
            margin-right: 10px;
            border:2px solid #EEEEEE;
            padding:25px;
            text-align: center;
            border-radius: 10px;
            color: grey;
            font-weight: bold;
            cursor: pointer;
        }
        .wrapper-card:hover{
            border-color: red !important;
        }

        .input-custom{
            padding: 27px !important;
            height: auto !important;
            border: 2px solid #EEEEEE;
            border-radius: 10px;
            color: grey !important;
            font-weight: bold;
        }

        .input-custom-group{
            padding: 20px !important;
            height: auto !important;
            border: 2px solid #EEEEEE;
            border-radius: 10px;
            color: grey !important;
            font-weight: bold;
        }
        .input-custom-group>.form-control{
            border: none !important;
            text-align: center;
            color: grey !important;
            font-weight: bold;
        }
        .input-custom-group>.form-control:focus{
            outline: none !important;
            border-color: red !important;
            box-shadow:none !important;

        }
        button.btn-no-border{
            border: none !important;
            background-color: transparent !important;
        }
        button.btn-no-border:hover{
            border: none !important;
            background-color: transparent !important;
            color: grey !important;
            font-weight: bold;
        }
        button.btn-no-border:focus{
            border: none !important;
            background-color: transparent !important;
            color: grey !important;
            font-weight: bold;
            box-shadow:none !important;
        }

        .wrapper-card-weight{
            margin-left: 10px;
            border:2px solid #EEEEEE;
            padding:15px;
            text-align: right;
            border-radius: 10px;
            color: grey;
            font-weight: normal;
            background-color: #EEEEEE;
        }
        input[readonly]{
            background-color: transparent !important;
            cursor: not-allowed;
        }
        .btn-action-add-destinatoin{
            padding: 15px;
            border-radius: 10px;
            border-color: transparent;
            font-weight: bold;
            background-color: black;
            color: white;
        }
        .btn-action-add-destinatoin:hover{
            background-color: black;
            color: white;
        }
        .btn-action{
            padding: 15px;
            border-radius: 10px;
            border-color: transparent;
            font-weight: bold;
            width: 100%;
        }
        .btn-add{
            background-color: #EDF2FF;
            color: black;
        }
        .btn-del{
            background-color: #F7941E;
            color: white;
        }
        .btn-add:hover{
            background-color: #EDF2FF;
            color: black;
            border-color: #EDF2FF;
        }
        .btn-del:hover{
            background-color: #F7941E;
            color: white;
            border-color: #F7941E;

        }

        .iconTitle{
            font-size: 30px;
            border: 2px solid #EEEEEE;
            border-radius: 100%;
            padding:10px;
            margin-right: 10px
        }
        .rowCenter{
            vertical-align: middle;align-content: center;align-items: center;
        }
        .ml-20{margin-left:20px}
        .pr-20{padding-right: 20px}
        .mb-20{margin-bottom: 20px}
        .pembatas{border-style: dashed;border-width: 1px;border-color: #eeeeee;}
        .container-cancel{float:right;text-align: right;color:orange;cursor: pointer;}
        .btn-href{
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            margin-left: 10px;
        }

        .btn-next, .btn-next:hover{
            color:white;
            background-color: black;
            border-color: black;
        }

        .btn-prev,.btn-prev:hover{
            color:black;
            border-color: black;
            background-color: white;
        }
        .wrapper-card-page-2{
            border:1px solid blue;
            padding:20px;
            border-radius:10px;
        }
        .card-blue{
            background-color: #F5F8FF;
        }
        .txt-end{text-align: end;color: #6082D8}
        .title-txt-end{
            color: #C0C0C0;
        }
        .card-active{
            border:2px solid red;
        }
        .wrap-truck{
            border:2px solid #EEEEEE;
            margin-right: 10px;
            border-radius: 10px;
            padding: 10px;
        }



    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light"  style="padding-left:0;margin-left: 95px;margin-right: 95px;">
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link bold" href="#">
                    <img style="height:100px;width: 150px" src="https://bkk.smkn4kuningan.sch.id/storage/mitra/1628411658-pt-toyota-motor-manufacturing-indonesia.png" alt="">
                </a>
            </li>
        </ul>
        <ul class="navbar-nav">
            <li class="nav-item active" style="text-align: right">
                <a class="nav-link bold" href="#">Delivery Truck</a>
                <a class="nav-link" href="#" id="clock">Sunday, 09-16-2022 07:11 AM</a>
            </li>
        </ul>
    </div>
</nav>
<hr style="border-width: 2px">
<div id="wrapper-page-1">
    <div class="container">
        <div class="row">
            <div class="col-md-3 bold p-0">
                <i class="fa fa-truck iconTitle"></i>
                Detail Pemilihan Truck
            </div>
            <div class="col-md-12 p-0 bold mt-4">
                Pilih Jenis Truck
            </div>
            <div class="col-md-12">
                <div class="row" id="result-type"></div>
            </div>
        </div>
    </div>
    <div class="container mt-4 p-0"><hr class="pembatas"></div>
    <div class="container p-0" id="result-destinasi"></div>
    <div class="container mt-4 p-0"><hr class="pembatas"></div>
    <div class="container mb-20 p-0" id="result-truck"></div>


</div>
<div id="wrapper-page-2" style="display:none">
    <div class="container">
        <div class="row justify-content-between wrapper-card-page-2" id="result-date">

        </div>
    </div>
    <div class="container mt-4 p-0">
        <hr class="pembatas">
    </div>
    <div class="container">
        <div class="row justify-content-between wrapper-card-page-2 card-blue">
            <div class="col-md-12 p-0">Jenis Truck</div>
            <hr/>
            <div  class="col-md-12">
                <div class="row" id="result-truck-type"></div>
            </div>
        </div>
    </div>
    <div class="container mt-4 p-0">
        <hr class="pembatas">
    </div>
    <div class="container">
        <div class="row justify-content-between wrapper-card-page-2 card-blue">
            <div class="col-md-12 p-0">Destinasi</div>
            <hr/>
            <div class="col-md-12" id="result-destination"></div>
        </div>
    </div>
</div>
<div class="container mt-4 p-0">
    <hr class="pembatas">
</div>
<div class="container mb-20">
    <div class="row justify-content-end">
        <button class="btn btn-outline-secondary btn-href btn-prev" onclick="handlePrev()"> KEMBALI</button>
        <button class="btn btn-outline-secondary btn-href btn-next" onclick="handleNext()"> LANJUT</button>
    </div>
</div>

<script>

    let indexType=0;
    let dataType=['S','M','L'];
    const lebar=4;
    const beratS=5;
    const beratM=10;
    const beratL=15;
    let data = [
        {
            truckSize:"S",
            destination:[
                {
                    dest:"Tanggerang 1",
                    prov:"Tanggerang",
                    city:"Tanggerang",
                    code:40526,
                    box:[
                        {
                            size:"S",
                            qty:8*lebar,
                            weight:beratS*8*lebar
                        },
                        {
                            size:"L",
                            qty:3*lebar,
                            weight:beratL*3*lebar
                        },
                    ]
                },
                {
                    dest:"Bogor 2",
                    prov:"Jawabarat",
                    city:"Bogor",
                    code:40527,
                    box:[
                        {
                            size:"S",
                            qty:4*lebar,
                            weight:beratS*4*lebar
                        },
                        {
                            size:"M",
                            qty:8*lebar,
                            weight:beratM*8*lebar
                        },
                        {
                            size:"L",
                            qty:3*lebar,
                            weight:beratL*3*lebar
                        }
                    ]
                },
                {
                    dest:"Bogor 1",
                    prov:"Jawabarat",
                    city:"Bogor",
                    code:40527,
                    box:[
                        {
                            size:"S",
                            qty:9*lebar,
                            weight:beratS*9*lebar
                        },
                        {
                            size:"M",
                            qty:4*lebar,
                            weight:beratM*4*lebar
                        },
                        {
                            size:"L",
                            qty:3*lebar,
                            weight:beratL*3*lebar
                        }
                    ]
                }
            ]
        }
    ];
    let dataTruck=[
        {size:"S",img:[1,2,3]},
        {size:"M",img:[]},
        {size:"L",img:[]}
    ];
    $(document).ready(function(){
        $(".pembatas").css({"display":"none"})
        let htmlType="";
        for(let i=0;i<dataType.length;i++){
            htmlType+='<div class="col-md-2 mt-4 wrapper-card" id="card-type-'+i+'" onclick="setType('+i+')">Truck Size '+dataType[i]+'</div>'
        }
        $("#result-type").html(htmlType);
        checkPage(localStorage.page===undefined || localStorage.page==="1");
        if(localStorage.indexTruckType==="2"){
            setType(localStorage.indexTruckType);
            checkPage(false)
        }
        console.log(localStorage.page)
    });

    function handlePrev(){
        localStorage.setItem("page","1");
        checkPage(true)
    }
    function handleNext(){
        localStorage.setItem("page","2");
        setTimeout(()=>checkPage(false),100);
    }
    function checkPage(isPage1){
        $("#wrapper-page-1").css({"display":isPage1?"block":"none"});
        $("#wrapper-page-2").css({"display":isPage1?"none":"block"});
        if(!isPage1){
            const size=dataType[localStorage.indexTruckType];
            const dataClock = getClock();
            const datePage2=dataClock.currentDate.replaceAll("-","/");
            let htmlDate="";let htmlTypeTruck="";let htmlDestinasi="";
            htmlDate+=generateBetween("Date",datePage2,);
            htmlDate+=generateBetween("Time",dataClock.currentTime);
            htmlTypeTruck+=generateBetween("Size Truck",size);
            htmlTypeTruck+=generateBetween("Dimensi Truck","30 m");
            htmlTypeTruck+=generateBetween("Kapasitas Truck","100 kg")

            const newDestinasi=data.filter((res,i)=>res.truckSize===size);
            for(let i=0;i<newDestinasi.length;i++){
                for(let j=0;j<newDestinasi[i].destination.length;j++){
                    const box=newDestinasi[i].destination[j];
                    let htmlBox="";
                    for(let iBox=0;iBox<box.box.length;iBox++){
                        const boxDetail=box.box[iBox];
                        htmlBox+=`<div class="col-md-12 mb-20">Box ${iBox+1}</div>`
                        htmlBox+=`<div class="col-md-12">
                            <div class="container" style="padding-right: 0">
                                <div class="row justify-content-between">
                                    <p style="color:grey">Ukuran Box</p>
                                    <p class="txt-end">${boxDetail.size}</p>
                                </div>
                                <div class="row justify-content-between">
                                    <p style="color:grey">Box Weight</p>
                                    <p class="txt-end">${boxDetail.weight} Kg</p>
                                </div>
                                <div class="row justify-content-between">
                                    <p style="color:grey">Qty Box</p>
                                    <p class="txt-end">${boxDetail.qty} Pcs</p>
                                </div>
                                <div class="row justify-content-between">
                                    <p style="color:grey">Total Berat Box</p>
                                    <p class="txt-end">${boxDetail.qty * boxDetail.weight} Kg</p>
                                </div>
                            </div>
                        </div>`;
                    }
                    htmlDestinasi+=`<div class="row justify-content-between">
                        <p style="color:grey">Destinasi ${j+1}</p>
                        <p class="txt-end">${box.dest}</p>
                        <div class="container">
                            <div class="row justify-content-between">
                                ${htmlBox}
                            </div>
                        </div>

                    </div>`;
                    htmlDestinasi+=`<div class="row"><div class="container"><hr  class="pembatas"></div></div>`;
                }
            }

            $("#result-date").html(htmlDate);
            $("#result-truck-type").html(htmlTypeTruck);
            $("#result-destination").html(htmlDestinasi);

        }

    }


    function generateBetween(title,val){
       return `
        <div class="col-md-6 p-0">
            <div class="row">
                <div class="col-md-6 title-txt-end">${title}</div>
                <div class="col-md-6">:</div>
            </div>
        </div>
        <div class="col-md-6 p-0 txt-end p-0">${val}</div>`;
    }
    function generateTruck(truckSize){
        let html="";
        let htmlTruck="";
        const newData=dataTruck.filter((res,i)=>truckSize===res.size);
        let imgCount=0;
        for(let i=0;i<newData.length;i++){
            imgCount=newData[i].img.length;
            for(let j=0;j<newData[i].img.length;j++){
                htmlTruck+=`<div class="wrap-truck">
                    <img src="./assets/${newData[i].img[j]}.png" alt="">
                </div>`
            }
        }
        if(imgCount>0){
            html=`<div class="row">
                    <div class="col-md-12 bold p-0 mb-20">
                        <i class="fa fa-truck iconTitle"></i>
                       Pilihan Susunan
                    </div>
                    ${htmlTruck}
                </div>`;
        }
        $("#result-truck").html(html);
    }

    function generateDestinasi(truckSize){
        generateTruck(truckSize);
        const newData = data.filter((res)=>truckSize===res.truckSize);
        let html="";
        for(let i=0;i<newData.length;i++){
            for(let j=0;j<newData[i].destination.length;j++){
                let boxHtml="";
                for(let iBox=0;iBox<newData[i].destination[j].box.length;iBox++){
                    let box=newData[i].destination[j].box[iBox];
                    boxHtml+=`<div class="row ml-20 pr-20">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-3">${generateInput(box.size)}</div>
                                <div class="col-md-3">${generateInput(box.qty)}</div>
                                <div class="col-md-3 wrapper-card-weight">Box Weight<br/>
                                    <span class="bold"><span id="">${box.weight}</span> Kg</span>
                                </div>
                            </div>
                            <hr style="border-color: transparent">
                        </div>
                    </div>`;
                }
                html+=`<div class="row">
                    <div class="col-md-12 mb-20 bold">
                        <i class="fa fa-sitemap iconTitle"></i>
                        Pemilihan Destinasi
                    </div>
                    <div class="col-md-3"> ${generateInput(newData[i].destination[j].dest)}</div>
                    <div class="col-md-3"> ${generateInput(newData[i].destination[j].prov)}</div>
                    <div class="col-md-3"> ${generateInput(newData[i].destination[j].city)}</div>
                    <div class="col-md-3"> ${generateInput(newData[i].destination[j].code)}</div>

                    <div class="container mt-4">
                        <div class="row ml-20 pr-20">
                            <div class="col-md-12 bold p-0 mb-20"><i class="fa fa-cube iconTitle"></i> Pemilihan Box</div>
                        </div>
                        ${boxHtml}
                    </div>

                </div>`;
            }
        }
        $("#result-destinasi").html(html);

    }




    function setType(i){
        let isTrue=false;
        indexType = i;
        $(".wrapper-card").removeClass("card-active");
        localStorage.setItem("indexTruckType",i);
        for(let x=0; x<dataType.length; x++){
            if(dataType[x]===dataType[i]){
                isTrue=true;
                break;
            }else{
                isTrue=false;
            }
        }
        if(isTrue){
            $(`#card-type-${i}`).addClass("card-active");
        }else{
            $("#card-type-${i}").removeClass("card-active")
        }
        generateDestinasi(dataType[i]);
    }

    function generateInput(val){
        return ` <div class="input-group input-custom-group" >
           <input type="text" class="form-control" placeholder="Destinasi" value="${val}" readonly>
       </div>`
    }



    function getClock(){
        const daysName = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
        let today = new Date();
        let year = today.getFullYear();
        let month = today.getMonth() + 1;
        let day = today.getDate();
        let hour = today.getHours();
        let min = today.getMinutes();
        let sec = today.getSeconds();
        am_pm = "AM";
        if (hour > 12) {
            hour -= 12;
            am_pm = "PM";
        }
        if (hour === 0) {
            hour = 12;
            am_pm = "AM";
        }

        hour = hour < 10 ? "0" + hour : hour;
        min = min < 10 ? "0" + min : min;
        sec = sec < 10 ? "0" + sec : sec;
        month = month < 10 ? "0" + month : month;
        day = day < 10 ? "0" + day : day;
        let currentDate = [day,month,year].join("-");
        let currentTime = hour + ":"+ min + ":" + sec + " " + am_pm;
        return {dayName:daysName[today.getDay()],currentDate,currentTime:currentTime};
    }
    window.onload = setInterval(function() {
        const dataClock = getClock();
        document.getElementById("clock").innerHTML = dataClock.dayName+", "+dataClock.currentDate + " " + dataClock.currentTime;
    }, 1000);
</script>
</body>
</html>