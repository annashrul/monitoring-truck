<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Boostrap 4 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <!-- Style -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <!-- Script -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
    <style>
        *{
            font-family: 'Poppins', sans-serif;
        }
        .bold {
            font-weight: bold !important;
        }
        .wrapper-card{
            margin-right: 10px;
            border:2px solid #EEEEEE;
            padding:25px;
            text-align: center;
            border-radius: 10px;
            color: grey;
            font-weight: bold;
            cursor: pointer;
        }
        .wrapper-card:hover{
            border-color: red !important;
        }
        .select2-container--default .select2-selection--single{
            padding:25px;
            height: auto;
            margin-right: 10px;
            font-weight: bold;
            position: relative;
            border: 2px solid #EEEEEE !important;
            border-radius: 10px !important;
            align-content: center !important;
        }
        span.select2-selection--single[aria-expanded=true] {
            border-color: red !important;
        }
        .select2-selection--single:hover{
            border-color: red !important;
        }

        .select2-container--default .select2-selection--single .select2-selection__arrow b{
            border-style: none !important;
        }
        .js-example-basic-single{
            width: 100%;padding:20px
        }
        .select2-container--default .select2-selection--single .select2-selection__rendered {
            /*line-height: normal!important;*/
        }
        .select2-container .select2-selection--single .select2-selection__rendered {
            /*white-space: normal!important;*/
            color: grey !important;
        }
        .select2-container--default .select2-selection--single .select2-selection__placeholder{
            color: grey !important;
        }
        .select2-search__field:focus
        {border: 1px solid #3c8dbc !important;outline: none !important;}
        .select2-container--default .select2-search--dropdown .select2-search__field{
            border-bottom: 1px solid #EEEEEE !important;
            border-top: none !important;
            border-left: none !important;
            border-right: none !important;
            /*border-radius: 10px !important;*/
        }
        .select2-container--default .select2-search--dropdown:focus{
            border: 1px solid #EEEEEE !important;
            border-radius: 10px !important;
        }
        .select2-dropdown{
            border: 1px solid #EEEEEE !important;
            border-radius: 10px !important;
        }
        .select2-container--default .select2-results__option--highlighted.select2-results__option--selectable{
            background-color: white !important;
        }
        .input-custom{
            padding: 27px !important;
            height: auto !important;
            border: 2px solid #EEEEEE;
            border-radius: 10px;
            color: grey !important;
            font-weight: bold;
        }
        select.form-control{
            padding: 27px !important;
            height: auto !important;
            border: 2px solid #EEEEEE;
            border-radius: 10px;
            color: grey !important;
            font-weight: bold;
        }
        select:focus, .input-custom:focus{
            outline: none !important;
            border-color: red !important;
            box-shadow:none !important;

        }
        .input-custom-group{
            padding: 20px !important;
            height: auto !important;
            border: 2px solid #EEEEEE;
            border-radius: 10px;
            color: grey !important;
            font-weight: bold;
        }
        .input-custom-group>.form-control{
            border: none !important;
            text-align: center;
            color: grey !important;
            font-weight: bold;
        }
        .input-custom-group>.form-control:focus{
            outline: none !important;
            border-color: red !important;
            box-shadow:none !important;

        }
        button.btn-no-border{
            border: none !important;
            background-color: transparent !important;
        }
        button.btn-no-border:hover{
            border: none !important;
            background-color: transparent !important;
            color: grey !important;
            font-weight: bold;
        }
        button.btn-no-border:focus{
            border: none !important;
            background-color: transparent !important;
            color: grey !important;
            font-weight: bold;
            box-shadow:none !important;
        }
        
        .wrapper-card-weight{
            margin-left: 10px;
            border:2px solid #EEEEEE;
            padding:15px;
            text-align: right;
            border-radius: 10px;
            color: grey;
            font-weight: normal;
            background-color: #EEEEEE;
        }
        input[readonly]{
            background-color: transparent !important;
            cursor: not-allowed;
        }
        .btn-action-add-destinatoin{
            padding: 15px;
            border-radius: 10px;
            border-color: transparent;
            font-weight: bold;
            background-color: black;
            color: white;
        }
        .btn-action-add-destinatoin:hover{
            background-color: black;
            color: white;
        }
        .btn-action{
            padding: 15px;
            border-radius: 10px;
            border-color: transparent;
            font-weight: bold;
            width: 100%;
        }
        .btn-add{
            background-color: #EDF2FF;
            color: black;
        }
        .btn-del{
            background-color: #F7941E;
            color: white;
        }
        .btn-add:hover{
            background-color: #EDF2FF;
            color: black;
            border-color: #EDF2FF;
        }
        .btn-del:hover{
            background-color: #F7941E;
            color: white;
            border-color: #F7941E;

        }
        .select2-container--default .select2-results__option--selected {
            background-color: #ddd !important;
            color: red !important;
        }
        .select2-results__option {
            color: grey;
            font-weight: bold !important;
        }

        .select2-results__option--highlighted {
            color: red !important;
        }

        .iconTitle{
            font-size: 30px;
            border: 2px solid #EEEEEE;
            border-radius: 100%;
            padding:10px;
            margin-right: 10px
        }
        .rowCenter{
            vertical-align: middle;align-content: center;align-items: center;
        }
        .ml-20{margin-left:20px}
        .pr-20{padding-right: 20px}
        .mb-20{margin-bottom: 20px}
        .pembatas{border-style: dashed;border-width: 1px;border-color: #eeeeee;}
        .container-cancel{float:right;text-align: right;color:orange;cursor: pointer;}
        .btn-href{
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .btn-next, .btn-next:hover{
            color:white;
            background-color: black;
            border-color: black;
        }
        
        .btn-prev,.btn-prev:hover{
            color:black;
            border-color: black;
            background-color: white;
        }

        .wrapper-card-page-2{
            border:1px solid blue;
            padding:20px;
            border-radius:10px;
        }
        .card-blue{
            background-color: #F5F8FF;
        }
        .txt-end{text-align: end;}
        .card-active{
            border:2px solid red;
        }
        section.content {
            /*max-width: 1200px;*/
            /*margin-left: auto;*/
            /*margin-right: auto;*/
            height: 100%;
            /*background-color: lightblue;*/
            /*padding: 0px;*/
        }
        section.content::after {
            clear: both;
            content: "";
            display: block;
        }

        .sheets {
            text-align: center;
            float: left;
            display: block;
            /*padding-right: 10px;*/
            /*margin-right: 2.3576520234%;*/
            width: 100%;
            margin-top: 10px;
            height: 50px;
            background-color: white;
        }
        .sheets:last-child {
            margin-right: 0;
        }
        .sheets:nth-child(4n) {
            margin-right: 0;
        }
        .sheets:nth-child(4n+1) {
            clear: left;
        }

        .standard {
            box-shadow: 1px 1px 0 rgba(26, 26, 26, 0.3), 3px 3px 0 white, 4px 4px 0 rgba(26, 26, 26, 0.325), 6px 6px 0 white, 7px 7px 0 rgba(26, 26, 26, 0.35), 9px 9px 0 white, 10px 10px 0 rgba(26, 26, 26, 0.375);
        }

        .few {
            box-shadow: 1px 1px 0 rgba(26, 26, 26, 0.3), 3px 3px 0 white, 4px 4px 0 rgba(26, 26, 26, 0.325);
        }



        .many {
            box-shadow: 1px 1px 0 red, 3px 3px 0 white, 4px 4px 0 yellow, 6px 6px 0 white, 7px 7px 0 green, 9px 9px 0 white, 10px 10px 0 black, 12px 12px 0 white, 13px 13px 0 rgba(26, 26, 26, 0.4), 15px 15px 0 white, 16px 16px 0 rgba(26, 26, 26, 0.425), 18px 18px 0 white, 19px 19px 0 rgba(26, 26, 26, 0.45);
        }

        .left-short-red {
            box-shadow: -1px 1px 0 rgba(0, 0, 0, 0.3), -2px 2px 0 red, -3px 3px 0 rgba(0, 0, 0, 0.325), -4px 4px 0 red, -5px 5px 0 rgba(0, 0, 0, 0.35), -6px 6px 0 red, -7px 7px 0 rgba(0, 0, 0, 0.375);
        }

        .left-red {
            box-shadow: -1px 1px 0 blue, -3px 3px 0 red, -4px 4px 0 yellow, -6px 6px 0 red, -7px 7px 0 green, -9px 9px 0 red, -10px 10px 0 purple;
        }

        .long-left {
            box-shadow: -1px 1px 0 red, -3px 3px 0 red, -4px 4px 0 black, -6px 6px 0 black, -7px 7px 0 green, -9px 9px 0 green, -10px 10px 0 green;
        }
        .left {
            box-shadow: -1px 1px 0 white, -3px 3px 0 black, -4px 4px 0 white, -6px 6px 0 red, -7px 7px 0 white, -9px 9px 0 blue;
        }
        .short {
            box-shadow: 1px 1px 0 rgba(26, 26, 26, 0.3), 2px 2px 0 white, 3px 3px 0 rgba(26, 26, 26, 0.325), 4px 4px 0 white, 5px 5px 0 rgba(26, 26, 26, 0.35), 6px 6px 0 white, 7px 7px 0 rgba(26, 26, 26, 0.375);
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light"  style="padding-left:0;margin-left: 95px;margin-right: 95px;">
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link bold" href="#">
                    <img style="height:100px;width: 150px" src="https://bkk.smkn4kuningan.sch.id/storage/mitra/1628411658-pt-toyota-motor-manufacturing-indonesia.png" alt="">
                </a>
            </li>
        </ul>
        <ul class="navbar-nav">
            <li class="nav-item active" style="text-align: right">
                <a class="nav-link bold" href="#">Delivery Truck</a>
                <a class="nav-link" href="#" id="clock">Sunday, 09-16-2022 07:11 AM</a>
            </li>
        </ul>
    </div>
</nav>
<hr style="border-width: 2px">
<!--<div class="container" style="margin-bottom: 50px">-->
    <!--<div class="row">-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="long-left sheets">1</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">2</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">3</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">4</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">5</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">6</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">7</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">8</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">9</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">10</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">11</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">12</div>-->
            <!--</section>-->
        <!--</div>-->


        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="long-left sheets">1</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">2</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">3</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">4</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">5</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">6</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">7</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">8</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">9</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">10</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">11</div>-->
            <!--</section>-->
        <!--</div>-->

        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">12</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="long-left sheets">1</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">2</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">3</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">4</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">5</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">6</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">7</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">8</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">9</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">10</div>-->
            <!--</section>-->
        <!--</div>-->
        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">11</div>-->
            <!--</section>-->
        <!--</div>-->

        <!--<div class="col-md-1 p-0">-->
            <!--<section class="content">-->
                <!--<div class="left sheets">12</div>-->
            <!--</section>-->
        <!--</div>-->
    <!--</div>-->
<!--</div>-->

<div id="wrapper-page-1">
    <div class="container">
        <div class="row">
            <div class="col-md-3 bold p-0">
                <i class="fa fa-truck iconTitle"></i>
                Detail Pemilihan Truck
            </div>
            <div class="col-md-12 p-0 bold mt-4">
                Pilih Jenis Truck
            </div>
            <div class="col-md-12">
                <div class="row" id="result-type"></div>
            </div>


        </div>
    </div>
    <div class="container mt-4 p-0"><hr class="pembatas"></div>
    <div id="container-destination"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12 bold p-0">
                <button onclick="addDestination()" class="btn btn-outline-secondary btn-action-add-destinatoin"><i class="fa fa-plus"></i> TAMBAH DESTINASI</button>
            </div>
        </div>
    </div>
</div>
<div id="wrapper-page-2" style="display:none">
    <div class="container">
        <div class="row justify-content-between wrapper-card-page-2">
            <div class="col-md-6 p-0">
                <div class="row">
                    <div class="col-md-6">Date</div>
                    <div class="col-md-6">:</div>
                </div>
            </div>
            <div class="col-md-6 p-0 txt-end" id="datePage2"></div>
            <hr>
            <div class="col-md-6 p-0">
                <div class="row">
                    <div class="col-md-6">Time</div>
                    <div class="col-md-6">:</div>
                </div>
            </div>
            <div class="col-md-6 p-0 txt-end" id="timePage2"></div>
        </div>
    </div>
    <div class="container mt-4 p-0">
        <hr class="pembatas">
    </div>
    <div class="container">
        <div class="row justify-content-between wrapper-card-page-2 card-blue">
            <div class="col-md-12 p-0 bold">Jenis Truck</div>
            <hr/>
            <div class="col-md-6 p-0">
                <div class="row">
                    <div class="col-md-6">Date</div>
                    <div class="col-md-6">:</div>
                </div>
            </div>
            <div class="col-md-6 p-0 txt-end" id="dateTypePage2"></div>
            <hr>
            <div class="col-md-6 p-0">
                <div class="row">
                    <div class="col-md-6">Size Truck</div>
                    <div class="col-md-6">:</div>
                </div>
            </div>
            <div class="col-md-6 p-0 txt-end">Size <span id="sizeTypePage2"></span></div>
            <hr>
            <div class="col-md-6 p-0">
                <div class="row">
                    <div class="col-md-6">Dimensi Truck</div>
                    <div class="col-md-6">:</div>
                </div>
            </div>
            <div class="col-md-6 p-0 txt-end"><span id="dimenTypePage2"></span> Kg</div>
        </div>
    </div>
    <div class="container mt-4 p-0">
        <hr class="pembatas">
    </div>
     <div class="container">
        <div class="row justify-content-between wrapper-card-page-2 card-blue">
            <div class="col-md-12 p-0 bold">Destinasi</div>
            <hr/>
            <div class="col-md-12" id="result-destination">

            </div>
        </div>
    </div>
</div>
<div class="container mt-4 p-0">
    <hr class="pembatas">
</div>
<div class="container">
    <div class="row justify-content-end">
        <button class="btn btn-outline-secondary btn-href btn-prev" onclick="handlePrev()"> KEMBALI</button>
        <button class="btn btn-outline-secondary btn-href btn-next" onclick="handleNext()"> LANJUT</button>
    </div>
</div>
</body>
</html>

<script>
    var noItems=1;
    var noDestination=1;
    var dataProvince=[];
    var dataCity=[];
    var iMin='<i class="fa fa-minus"></i>';
    var iAdd='<i class="fa fa-plus"></i>';
    var page=1;
    var md6="col-md-6";
    var md12="col-md-12";
    var dataSizeBox=['S','M','L'];
    var dataType=['S','M','L'];
    var idxType=0;
    var dataDest=[
        {
            id:1,
            type:dataType[0],
            destination:{id:"",name:"pilih destinasi"},
            province:{id:'',name:"pilih provinsi",data:[]},
            city:{id:'',name:"pilih kota"},
            postalCode:"",
            detail:[{id:`${noDestination}-${noItems}`,qty:1,size:dataSizeBox[0],weight:1}]
        }
    ];

    var resultDestination=[];

    function getClock(){
        var daysName = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
        let today = new Date();
        let year = today.getFullYear();
        let month = today.getMonth() + 1;
        let day = today.getDate();
        let hour = today.getHours();
        let min = today.getMinutes();
        let sec = today.getSeconds();
        am_pm = "AM";
        if (hour > 12) {
            hour -= 12;
            am_pm = "PM";
        }
        if (hour === 0) {
            hour = 12;
            am_pm = "AM";
        }

        hour = hour < 10 ? "0" + hour : hour;
        min = min < 10 ? "0" + min : min;
        sec = sec < 10 ? "0" + sec : sec;
        month = month < 10 ? "0" + month : month;
        day = day < 10 ? "0" + day : day;
        let currentDate = [day,month,year].join("-");
        let currentTime = hour + ":"+ min + ":" + sec + " " + am_pm;
        return {dayName:daysName[today.getDay()],currentDate,currentTime:currentTime};
    }

    window.onload = setInterval(function() {
        const dataClock = getClock();
        document.getElementById("clock").innerHTML = dataClock.dayName+", "+dataClock.currentDate + " " + dataClock.currentTime;
    }, 1000);




    $(document).ready(function() {
        getProvince(0);

//        var htmlType="";
//        for(var i=0;i<dataType.length;i++){
//            htmlType+='<div class="col-md-2 mt-4 wrapper-card" id="card-type-'+i+'" onclick="setType('+i+')">Truck Size '+dataType[i]+'</div>'
//        }
//
//        $("#result-type").html(htmlType)
//        templateResultDestination();
//        $('#address').select2({placeholder: 'masukkan alamat'});
        setTimeout(function(){
            setType(0);
            Object.assign(dataDest[0].province,{data:dataProvince})
           setTimeout(()=>{
               templateDestination()
           },1000)
//            templateDestination()
//            console.log("data province",dataProvince)


        },100);
        checkPage(localStorage.page===undefined || localStorage.page==="1")
    });
    function setType(i){
        Object.assign(dataDest[0],{type:dataType[i]});
        let isTrue=false;
        $(".wrapper-card").removeClass("card-active");
        for(let x=0; x<dataType.length; x++){
            if(dataType[x]===dataType[i]){
                isTrue=true;
                break;
            }else{
                isTrue=false;
            }
        }
        if(isTrue){
            $(`#card-type-${i}`).addClass("card-active");
        }else{
            $("#card-type-${i}").removeClass("card-active")
        }
    }


    function checkPage(isPage1){
        $("#wrapper-page-1").css({"display":isPage1?"block":"none"});
        $("#wrapper-page-2").css({"display":isPage1?"none":"block"});
        if(!isPage1){
            const dataClock = getClock();
            const datePage2=dataClock.currentDate.replaceAll("-","/");

            $("#datePage2").html(datePage2);
            $("#timePage2").html(dataClock.currentTime);
            $("#dateTypePage2").html(datePage2);
            $("#sizeTypePage2").html(dataType[idxType]);
            $("#dimenTypePage2").html("10");
            let newDataDest=[];
            for(let i=0;i<dataDest.length;i++){
                newDataDest.push(
                    {
                        destination:`${dataDest[i].destination.name}, ${dataDest[i].city.name} ${dataDest[i].province.name} ${dataDest[i].postalCode}`,
                        size:"S",
                        weight:10,
                        qty:10
                    },
                )
            }
            resultDestination=newDataDest;
            setTimeout(()=>{
                templateResultDestination()
            },100);
            console.log("page 2",dataDest);
        }

    }

    function handleNext(){
        if(localStorage.page !== '2'){
            for(let i=0;i<dataDest.length;i++){
                if(dataDest[i].destination.id===""){
                    alert("destinasi tidak boleh kosong");
                    $(`#destination_${dataDest[i].destination.id}`).focus()
                    return;
                }
                if(dataDest[i].province.id===""){
                    alert("provinsi tidak boleh kosong");
                    $(`#province_${i}`).focus()
                    return;
                }
                if(dataDest[i].city.id===""){
                    alert("kota tidak boleh kosong");
                    $(`#city_${i}`).focus()
                    return;
                }
                if(dataDest[i].postalCode===""){
                    alert("kode pos tidak boleh kosong");
                    $(`#postalCode_${i}`).focus()
                    return;
                }
            }
            localStorage.setItem("page","2");
            setTimeout(()=>checkPage(false),100);
        }


    }
    function handlePrev(){
        localStorage.setItem("page","1");
        checkPage(true)
    }
    function reloadMaster(){
//        for(let i=0;i<dataDest.length;i++){
//            let res=dataDest[i];
//            let prov=res.province.id;
//            if(prov===""){
//                prov=dataProvince[0].id;
//            }
//            $(`#province_${i}`).val(prov);
//        }
//        dataDest.map((res,i)=>{
//            console.log(res);
//            let prov=res.province.id;
//            if(prov===""){
//                prov=dataProvince[0].id;
//            }
//            console.log(prov)
////            $(`#destination_${res.destination.id}`).val(res.destination.id);
////            $(`#province_${i}`).val(prov);
////            $(`#city_${i}`).val(res.city.id);
////            $(`#postalCode_${i}`).val(res.postalCode);
////            reloadDetail(i,res.detail);
//        })
    }
    function reloadDetail(i,res){
        res.map((row,x)=>{
            $(`#size_${i}_${x}`).val(row.size);
            $(`#qty_${i}_${x}`).val(row.qty);
            $(`#weight_${i}_${x}`).html(row.qty);
        })
    }
    function addDestination(){
        getProvince();
        noDestination=noDestination+1;
        setTimeout(function(){
            dataDest.push({
                id:noDestination,
                type:dataType[idxType],
                destination:{id:"",name:"pilih destinasi"},
                province:{id:'',name:"pilih provinsi",data:dataProvince},
                city:{id:'',name:"pilih kota"},
                postalCode:"",
                detail:[{id:`${noDestination}-${noItems}`,qty:1,size:dataSizeBox[0],weight:1}]
            });
            setTimeout(()=>{
                templateDestination()
            },100)
        },200)
    }
    function delDestination(dest){
        noDestination=noDestination-1;
        dataDest = dataDest.filter(res=>res.id!==dataDest[dest].id);
        setTimeout(function(){
            templateDestination();
        },100)

    }
    function addBox(item,dest){
        noItems = noItems+1;
        var idxItem=parseInt(item,10);
        var idxDest=parseInt(dest,10);
        var detail = dataDest[idxDest].detail;
        detail.push({id:`${noDestination}-${noItems}`,qty:1,size:5});
        setTimeout(()=>{
            templateDestination();
            reloadDetail(idxDest,detail);

        },100)
    }
    function delBox(item,dest){
        if(noItems>1){
            noItems = noItems-1;
            let idxItem=parseInt(item,10);
            let idxDest=parseInt(dest,10);
            let detail = dataDest[idxDest].detail;
            detail = detail.filter((res)=>res.id!==detail[idxItem-1].id)
            dataDest[idxDest].detail = detail;
            setTimeout(()=>{
                templateDestination();
                reloadDetail(idxDest,detail);
            },100)
        }

    }


    function actionItems(item,dest,act){
        var qty=dataDest[dest].detail[item].qty;
        if(act==="-"){
            if(qty > 1) qty=qty-1
        }else qty = qty+1;
        setTimeout(()=>{
            Object.assign(dataDest[dest].detail[item],{
                qty:qty,
                weight:qty,
            });
            setTimeout(()=>{
                $(`#size_${dest}_${item}`).val(dataDest[dest].detail[item].size);
                $(`#qty${dest}_${item}`).val(dataDest[dest].detail[item].qty)
                $(`#weight_${dest}_${item}`).html(dataDest[dest].detail[item].qty)
            },100)
        },100)
    }
    function templateDestination(){
        let html="";
        let htmlProvince='<option value="">pilih provinsi</option>';
        let dataDestination=[{id:1,name:"Toyota Bandung"}];
        let htmlDestination='<option value="">pilih destinasi</option>';
        let htmlCity='<option value="">pilih kota</option>';
        let htmlCancel='';
        let htmlSizeBox='';
        for(let iDest=0;iDest<dataDestination.length;iDest++){
            htmlDestination+='<option value="'+dataDestination[iDest].id+'">'+dataDestination[iDest].name.toLowerCase()+'</option>';
        }
        for(let iProv=0;iProv<dataProvince.length;iProv++){
            htmlProvince+='<option value="'+dataProvince[iProv].id+'">'+dataProvince[iProv].name.toLowerCase()+'</option>';
        }
        for(let iCity=0;iCity<dataCity.length;iCity++){
            htmlCity+='<option value="'+dataCity[iCity].id+'">'+dataCity[iCity].name.toLowerCase()+'</option>';
        }
        for(let iSize=0;iSize<dataSizeBox.length;iSize++){
            htmlSizeBox+='<option value="'+dataSizeBox[iSize]+'">'+dataSizeBox[iSize]+'</option>';
        }

        for(let i=0;i<dataDest.length;i++){
            let isCancel=i>0;
            htmlCancel=isCancel?'<div class="'+md6+' container-cancel" onclick="delDestination('+i+')">cancel destinasi</div>':'';
            let htmlItem='';
            let detail=dataDest[i].detail;
            let master=dataDest[i];
            for(var x=0;x<dataDest[i].detail.length;x++){
                var item=detail[x];
                htmlItem+= '<div class="row wrap_'+i+'">' +
                    '<div class="col-md-3 mr-2 mt-4 p-0">' +
                    '   <select class="form-control" id="size_'+i+'_'+x+'" onchange="getSize($(this).val(),'+i+','+x+')">'+htmlSizeBox+'</select>' +
                    '</div>' +
                    '<div class="col-md-3 mt-4 p-0">' +
                    '   <div class="input-group input-custom-group" >' +
                    '       <button onclick="actionItems('+x+','+i+',`-`)" class="btn-no-border">'+iMin+'</button>' +
                    '       <input readonly value="'+item.qty+'" id="qty'+i+'_'+x+'" type="text" class="form-control">' +
                    '       <button onclick="actionItems('+x+','+i+',`+`)" class="btn-no-border">'+iAdd+'</button>' +
                    '   </div>' +
                    '</div>' +
                    '<div class="col-md-2 mt-4 wrapper-card-weight">Box Weight<br/>' +
                    '   <span class="bold"><span id="weight_'+i+'_'+x+'">'+item.weight+'</span> Kg</span>' +
                    '</div>' +
                '</div>';
            }
            for(let iProv=0;iProv<dataDest[i].province.data.length;iProv++){
                htmlProvince+='<option value="'+dataDest[i].province.data[iProv].id+'">'+dataDest[i].province.data[iProv].name.toLowerCase()+'</option>';
            }

            html+= '<div class="container">' +
            '   <div class="row">' +
            '       <div class="'+md12+' bold p-0">' +
            '           <div class="row rowCenter">' +
            '               <div class="'+md6+'">' +
            '                   <i class="fa fa-sitemap iconTitle"></i> Pemilihan Destinasi' +
            '               </div>'+htmlCancel+
            '           </div>' +
            '       </div>' +
            '       <div class="col-md-4 mt-4 p-0">' +
            '           <select class="form-control" id="destination_'+master.destination.id+'" onchange="getDestination($(this).val(),'+i+')">'+htmlDestination+'</select>' +
            '       </div>' +
            '       <div class="col-md-3 mt-4">' +
            '           <select class="form-control" id="province_'+i+'" onchange="loadCity($(this).val(),'+i+')">'+htmlProvince+'</select>' +
            '       </div>' +
            '       <div class="col-md-3 mt-4">' +
            '           <select class="form-control" id="city_'+i+'"  onchange="getCity($(this).val(),'+i+')">'+htmlCity+'</select>' +
            '       </div>' +
            '       <div class="col-md-2 mt-4 p-0">' +
            '           <input type="text" id="postalCode_'+i+'" class="input-custom" placeholder="masukkan kode pos" onchange="getPostalCode($(this).val(),'+i+')">' +
            '       </div>' +
            '   </div>' +
            '   <div class="container mt-4">' +
            '       <div class="row ml-20 pr-20 mb-20">' +
            '           <div class="'+md12+' bold p-0">' +
            '               <i class="fa fa-cube iconTitle"></i> Pemilihan Box' +
            '           </div>' +
            '           <div class="'+md12+'">'+htmlItem+'</div>' +
            '               <div class="col-md-2 mr-3 p-0 mt-4">' +
            '                    <button onclick="addBox('+x+','+i+')" class="btn btn-action btn-add">'+iAdd+' TAMBAH BOX</button>' +
            '               </div>' +
            '               <div class="col-md-2 p-0 mt-4">' +
            '                    <button onclick="delBox('+x+','+i+')" class="btn btn-action btn-del"><i class="fa fa-trash-o"></i> DELETE</button>' +
            '               </div>' +
            '           </div>' +
            '       </div>' +
            '   </div>' +
            '   <div class="container mt-4 p-0"><hr class="pembatas"></div>'
        }

        $("#container-destination").html(html);
    }
    function templateResultDestination(){
        let html = "";
        for(let i=0; i<resultDestination.length; i++){
            let total=resultDestination[i].weight * resultDestination[i].qty;
            html+='<div class="row justify-content-between mb-20">' +
                '   <div class="'+md6+' p-0">' +
                '       <div class="row">' +
                '           <div class="'+md6+'">Destinasi '+`${i+1}`+'</div><div class="'+md6+'">:</div>' +
                '       </div>' +
                '   </div>' +
                '   <div class="'+md6+' p-0 txt-end">'+resultDestination[i].destination+'</div><hr>' +
                '       <div class="container">\n' +
                '           <div class="row justify-content-between">' +
                '               <div class="'+md12+' bold">Box</div><hr>' +
                '               <div class="'+md6+'">' +
                '                   <div class="row">' +
                '                       <div class="'+md6+'">Ukuran Box</div><div class="'+md6+'">:</div>' +
                '                   </div>' +
                '               </div>' +
                '               <div class="'+md6+' p-0 txt-end">Size '+resultDestination[i].size+'</div><hr>' +
                '               <div class="'+md6+'">' +
                '                   <div class="row">' +
                '                       <div class="'+md6+'">Box Weight</div><div class="'+md6+'">:</div>' +
                '                   </div>' +
                '               </div>' +
                '               <div class="'+md6+' p-0 txt-end">'+resultDestination[i].weight+' Kg</div><hr>' +
                '               <div class="'+md6+'">' +
                '                   <div class="row">' +
                '                       <div class="'+md6+'">Qty Box</div><div class="'+md6+'">:</div>' +
                '                   </div>' +
                '               </div>' +
                '               <div class="'+md6+' p-0 txt-end">'+resultDestination[i].qty+' Pcs</div><hr>' +
                '               <div class="'+md6+'">' +
                '                   <div class="row">' +
                '                       <div class="'+md6+'">Total Berat Box</div><div class="'+md6+'">:</div>' +
                '                   </div>' +
                '               </div>' +
                '               <div class="'+md6+' p-0 txt-end">'+total+' Pcs</div><hr>' +
                '           </div>' +
                '       </div>' +
                '   </div>';
            html+='<div class="container mt-4 p-0"><hr class="pembatas"/></div>';
        }
        $("#result-destination").html(html)
    }


    var baseUrl='http://www.emsifa.com/api-wilayah-indonesia/api/';

    function getProvince(idxDest){
        $.ajax({
            url:`${baseUrl}provinces.json`,
            dataType:"JSON",
            type:"GET",
            success:function(res){
                dataProvince=res;
//                var html="";
//                for(let i=0;i<res.length;i++){
//                    html+='<option value="'+res[i].id+'">'+res[i].name.toLowerCase()+'</option>'
//                }
//                setTimeout(()=>{
//                    $("#province_"+idxDest).html(html);
//                    setTimeout(()=>{
//                        Object.assign(dataDest[idxDest],{
//                            province:{
//                                id:dataDest[idxDest].province.id,
//                                name:dataDest[idxDest].province.name
//                            },
//                        });
//                        console.log(dataDest)
//                        loadCity(res[0].id,idxDest);
//                    })
//                },200)
            }
        });
    }
    function getPostalCode(code,dest){
        Object.assign(dataDest[dest],{postalCode:code})
    }
    function getSize(size,dest,item){
        Object.assign(dataDest[dest].detail[item],{size:size})
    }
    function getCity(cityId,dest){
        var newDataDest= dataDest[dest];
        var cityName=$(`#city_${dest}`).find(`option:selected`).text();
        Object.assign(dataDest[dest],{city:{id:cityId,name:cityName.toLowerCase()}})
    }
    function getDestination(destId,dest){
        var newDataDest= dataDest[dest];
        var destName=$(`#destination_${newDataDest.destination.id}`).find(`option:selected`).text();
        Object.assign(dataDest[dest],{destination:{id:destId,name:destName}})
    }

    function loadCity(provinceId,dest){
        var provinceName=$(`#province_${dest}`).find(`option:selected`).text();
        Object.assign(dataDest[dest],{province:{id:provinceId,name:provinceName.toLowerCase()}});
        $.ajax({
            url:`${baseUrl}regencies/${provinceId}.json`,
            dataType:"JSON",
            type:"GET",
            success:function(res){
                dataCity=res;
                var html='';
                for(var i=0;i<res.length;i++){
                    html+='<option value="'+res[i].id+'">'+res[i].name.toLowerCase()+'</option>';
                }
                 setTimeout(function(){
                    $(`#city_${dest}`).html(html);
                    setTimeout(()=>{
                        Object.assign(dataDest[dest],{city:{id:res[0].id,name:res[0].name.toLowerCase()}});
                    },1000)
                },100)
            }
        });
       
        

    }


</script>